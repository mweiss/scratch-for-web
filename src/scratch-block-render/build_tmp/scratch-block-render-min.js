YUI.add("scratch-block-render",function(C){var B=C.Base.create("roundedBasicBlock",C.Shape,[],{_draw:function(){var D=this.get("width"),G=this.get("height"),F=this.get("ellipseWidth"),J=this.get("ellipseHeight"),I=this.get("showFooter"),H=this.get("showHeader"),E=this.get("connectorIndent"),K=this.get("connectorWidth");this.clear();this.moveTo(0,J);if(I){this.lineTo(0,G-2*J);this.quadraticCurveTo(0,G-J,F,G-J);this.lineTo(E,G-J);this.quadraticCurveTo(E,G,E+F,G);this.lineTo(E+K-F,G);this.quadraticCurveTo(E+K,G,E+K,G-J);this.lineTo(D-F,G-J);this.quadraticCurveTo(D,G-J,D,G-2*J);}else{this.lineTo(0,G-J);this.quadraticCurveTo(0,G,F,G);this.lineTo(D-F,G);this.quadraticCurveTo(D,G,D,G-J);}this.lineTo(D,J);this.quadraticCurveTo(D,0,D-F,0);if(H){this.lineTo(E+K,0);this.quadraticCurveTo(E+K,J,E+K-F,J);this.lineTo(E+F,J);this.quadraticCurveTo(E,J,E,0);}this.lineTo(F,0);this.quadraticCurveTo(0,0,0,J);this.end();}},{NAME:"roundedBasicBlock",ATTRS:C.mix({showHeader:{value:true},showFooter:{value:true},ellipseWidth:{value:5},ellipseHeight:{value:5},connectorIndent:{value:15},connectorWidth:{value:20}},C.Shape.ATTRS)});var A=C.Base.create("graphicsBlockRender",C.View,[],{container:'<div class="basicBlock"></div>',blockBody:null,initializer:function(){},_renderBody:function(){var F=this.get("block"),E=F.get("inputBlocks"),J={},K=0,M={},D=this.container,I;if(F.type==="constant"){I=""+F.get("value");}else{C.each(E,function(P,O){var Q=C.guid();J[Q]=P;M[O]='<div id="'+Q+'" class="basicBlock inputParentBlock"></div>';});I=F.statement;}var L=/\{[^}]+\}/,N=I.split(L),G=I.match(L),H="";C.each(N,function(P,O){var Q=C.guid();J[Q]=null;H+='<div id="'+Q+'" class="basicBlock inputParentBlock">'+P+"</div>";if(G&&G[O]){H+=G[O];}});D.appendChild(C.substitute(H,M));C.each(J,function(P,Q){var O=D.one("#"+Q);if(P){this._renderBlock(D,P,O);}K=Math.max(K,O.get("region").height);},this);C.each(J,function(Q,R){var P=D.one("#"+R);var O=K-P.get("region").height;P.setStyle("marginTop",Math.floor(O/2)+"px");P.setStyle("marginBottom",Math.ceil(O/2)+"px");},this);},_renderBlock:function(D,G,E){var F=D.get("region");var H=new A({block:G,blockFillColor:"#999999",container:E});H.render();},render:function(){var I=this.get("block"),E=this.container,H;if(!E.inDoc()){this.get("parent").append(this.container);}H=new C.Graphic({render:E});this._renderBody();var G=E.get("region");var F=G.width,D=G.height;H.addShape({type:B,width:F,height:D,x:0,y:0,fill:{color:this.get("blockFillColor")},stroke:{weight:0},showHeader:I._topBlocksAllowed,showFooter:I._bottomBlocksAllowed});this.container.plug(C.Plugin.Drag,{dragMode:"intersect"});this.container.plug(C.Plugin.Drop);this.container.dd.on("drag:start",this._bringToFront,this);this.container.dd.on("drag:end",this._bringToBack,this);},_bringToFront:function(D){this.container.setStyle("zIndex",1);},_bringToBack:function(D){this.container.setStyle("zIndex",0);}},{ATTRS:{"block":{value:null,writeOnce:true},"parent":{value:null},"blockFillColor":{value:"#3851d2"}}});C.GraphicsBlockRender=A;},"@VERSION@",{use:["base","view","scratch-block-model","dd-plugin","dd-drop-plugin","graphics","substitute"]});