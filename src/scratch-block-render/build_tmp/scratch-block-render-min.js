YUI.add("scratch-block-render",function(D){var C=D.Base.create("roundedBasicBlock",D.Shape,[],{_draw:function(){var E=this.get("width"),H=this.get("height"),G=this.get("ellipseWidth"),K=this.get("ellipseHeight"),J=this.get("showFooter"),I=this.get("showHeader"),F=this.get("connectorIndent"),L=this.get("connectorWidth");this.clear();this.moveTo(0,K);if(J){this.lineTo(0,H-2*K);this.quadraticCurveTo(0,H-K,G,H-K);this.lineTo(F,H-K);this.quadraticCurveTo(F,H,F+G,H);this.lineTo(F+L-G,H);this.quadraticCurveTo(F+L,H,F+L,H-K);this.lineTo(E-G,H-K);this.quadraticCurveTo(E,H-K,E,H-2*K);}else{this.lineTo(0,H-K);this.quadraticCurveTo(0,H,G,H);this.lineTo(E-G,H);this.quadraticCurveTo(E,H,E,H-K);}this.lineTo(E,K);this.quadraticCurveTo(E,0,E-G,0);if(I){this.lineTo(F+L,0);this.quadraticCurveTo(F+L,K,F+L-G,K);this.lineTo(F+G,K);this.quadraticCurveTo(F,K,F,0);}this.lineTo(G,0);this.quadraticCurveTo(0,0,0,K);this.end();}},{NAME:"roundedBasicBlock",ATTRS:D.mix({showHeader:{value:true},showFooter:{value:true},ellipseWidth:{value:5},ellipseHeight:{value:5},connectorIndent:{value:15},connectorWidth:{value:20}},D.Shape.ATTRS)});var A=D.Base.create("graphicsBlockListRender",D.View,[],{container:'<div class="blockList"></div>',render:function(){var E=this.get("blockList");E.each(function(I){var F=D.Node.create('<div class="blockWrapper"></div>'),G,H;this.container.append(F);H=new D.GraphicsBlockRender({block:I,parent:F});H.render();G=H.container.get("region");F.setStyle("width",G.width);F.setStyle("height",G.height);},this);}},{ATTRS:{"blockList":{value:null}}});D.GraphicsBlockListRender=A;var B=D.Base.create("graphicsBlockRender",D.View,[],{container:'<div class="basicBlock"></div>',blockBody:null,initializer:function(){},_renderBody:function(){var G=this.get("block"),F=G.get("inputBlocks"),K={},L=0,N={},E=this.container,J;if(G.type==="constant"){J=""+G.get("value");}else{D.each(F,function(Q,P){var R=D.guid();K[R]=Q;N[P]='<div id="'+R+'" class="basicBlock inputParentBlock"></div>';});J=G.statement;}var M=/\{[^}]+\}/,O=J.split(M),H=J.match(M),I="";D.each(O,function(Q,P){var R=D.guid();K[R]=null;I+='<div id="'+R+'" class="basicBlock inputParentBlock">'+Q+"</div>";if(H&&H[P]){I+=H[P];}});E.appendChild(D.substitute(I,N));D.each(K,function(Q,R){var P=E.one("#"+R);if(Q){this._renderBlock(E,Q,P);}L=Math.max(L,P.get("region").height);},this);D.each(K,function(R,S){var Q=E.one("#"+S);var P=L-Q.get("region").height;Q.setStyle("marginTop",Math.floor(P/2)+"px");Q.setStyle("marginBottom",Math.ceil(P/2)+"px");},this);},_renderBlock:function(E,H,F){var G=E.get("region");var I=new B({block:H,blockFillColor:"#999999",container:F});I.render();},render:function(){var J=this.get("block"),F=this.container,I;if(!F.inDoc()){this.get("parent").append(this.container);}I=new D.Graphic({render:F});this._renderBody();var H=F.get("region");var G=H.width,E=H.height;I.addShape({type:C,width:G,height:E+(J._bottomBlocksAllowed?5:0),x:0,y:0,fill:{color:this.get("blockFillColor")},stroke:{weight:0},showHeader:J._topBlocksAllowed,showFooter:J._bottomBlocksAllowed});this.container.plug(D.Plugin.Drag,{dragMode:"intersect"});this.container.plug(D.Plugin.Drop);this.container.dd.on("drag:start",this._bringToFront,this);this.container.dd.on("drag:end",this._bringToBack,this);},_bringToFront:function(E){this.container.setStyle("zIndex",1);},_bringToBack:function(E){this.container.setStyle("zIndex",0);}},{ATTRS:{"block":{value:null,writeOnce:true},"parent":{value:null},"blockFillColor":{value:"#3851d2"}}});D.GraphicsBlockRender=B;},"@VERSION@",{use:["base","view","scratch-block-model","dd-plugin","dd-drop-plugin","graphics","substitute"]});